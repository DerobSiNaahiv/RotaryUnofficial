<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rotary International | Contact</title>
    <link rel="stylesheet" href="style.css">
    <link rel="shortcut icon" href="logo.png" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
    <body id="body2">
        <nav class="nav3">
            <ul class="ulnav2">
                <div class="nav21">
                <img src="logo.png" alt="Logo" id="logo">
                </div>
                <div class="nav12">
                <li>
                    <a href="index.html" class="link">Home</a>
                </li>
                <li>
                    <a href="enq.html" class="link">Contact</a>
                </li>
                <li>
                    <a href="#content1" class="link">About us</a>
                </li>
                </div>
            </ul>
        </nav>

        <div class="container mt-3">
            <table class="table table-dark">
                <thead>
                    <th>S.NO</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Message</th>
                </thead>
                <tbody id="tbody1">
    
                </tbody>
            </table>
        </div>

        <script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-app.js";
import { getDatabase, ref, set, get, child, push, onValue } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyCHgy_U6tGQhzGFKCdvWB-qHVZgMwdaPRc",
  authDomain: "rotaryproject-5d2a3.firebaseapp.com",
  databaseURL: "https://rotaryproject-5d2a3-default-rtdb.firebaseio.com",
  projectId: "rotaryproject-5d2a3",
  storageBucket: "rotaryproject-5d2a3.appspot.com",
  messagingSenderId: "988368407906",
  appId: "1:988368407906:web:374e6b16a2f66118fab03b"
};

const app = initializeApp(firebaseConfig);

const db = getDatabase();

            var i = 0;
            var tbody = document.getElementById('tbody1');

            function Addcell(name, email, msg){
                let trow = document.createElement("tr");
                let td1 = document.createElement('td');
                let td2 = document.createElement('td');
                let td3 = document.createElement('td');
                let td4 = document.createElement('td');

                td1.innerHTML= ++i;
                td2.innerHTML= name;
                td3.innerHTML= email;
                td4.innerHTML= msg;

                trow.appendChild(td1);
                trow.appendChild(td2);
                trow.appendChild(td3);
                trow.appendChild(td4);

                tbody.appendChild(trow);
            }

            function Additems(msgs) {
                i = 0;
                tbody.innerHTML="";
                msgs.forEach(element => {
                    Addcell(element.name, element.email, element.msg);
                });
            }

            function getAlldata(){
                const dbref = ref(db);

            
                get(child(dbref, "msg")) 
                .then((snapshot)=> {
                    var msges =[];

                    snapshot.forEach(childSnapshot => {
                        msges.push(childSnapshot.val())
                    })
                    Additems(msges);
                })
            }

            window.onload = getAlldata;

        </script>

    </body>
</html>